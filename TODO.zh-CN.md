# TODO

## 功能与改进

* 更多快捷键：
    * Ctrl-(Shift)-Tab 在文件间切换（顺序？按使用顺序还是侧边栏顺序？）
    * 前进/后退快捷键（对应前进/后退按钮）cmd-opt-left/right？
    * 跟随光标下符号 - cmd-opt-return？

* 在项目中查找
    * 实现 <https://ace.c9.io/#nav=api&api=search> 跨多文件搜索
    * 顺便改进单文件替换 UI？
        * editor.commands.removeCommand('find');

* 在项目中跳转到符号

* 包含文件的删除与重命名（以及主 ink 重命名？）
    * 包含项右键菜单（重命名、删除）
        * 自动查找/替换匹配的 include 行
    * Mac 风格：选中文件后按回车重命名？双击重命名？
    * 文件 -> 重命名当前文件
* 改进在文件管理器中重命名文件时的行为
    * 当前文件监视器先删除再添加，会导致重命名后的新文件和旧文件同时出现。旧文件仍出现是因为仍被某处 include，类似于输入新 INCLUDE 行时的情况。或许可在文件名旁添加小字说明「包含自 xyz.ink」？

* 包含文件的层级视图（取代当前单层分组）？
* 在分组间拖放包含文件？（较复杂）
* 在导航中高亮有错误的文件
* 在问题浏览器中添加文件名（作为标题，仅在多文件且非单一活动文件时）
* 从外部打开与当前项目相关的 ink 文件时，切换到该文件

* 文件系统集成的错误检查（打开/保存文件等当前未做错误检查）

* 工具栏 UI：播放时跳转到剧情开头的特定路径
* 其他调试功能：查询变量、列出变量等
* 在每个回合块上添加回退按钮，回退到指定位置

* 隐藏/显示编辑器和播放视图
    * 当界面很宽时为两侧添加较大的左右边距，实现类似「专注」模式，尤其全屏时

* 暂停实时编译/播放？

* 动态修改菜单项标题以反映当前文件，例如：保存当前文件 => 保存 jolly.ink

* 修正菜单项启用逻辑，例如：仅在实际需要时显示保存

* 导出完整 web 播放器（使用 ink.js）

* 加载并播放 JSON 文件，且隐藏所有编辑控件？

## 工程

* **修复：**
    * 切换文件时 Ace 编辑器高亮有时不会被清除？
        * 可能出现在：修复错误后返回原文件时？（例如 "-> elsewhere"，新建文件，定义 elsewhere，原文件错误消失）
    * `/tmp` 从未被清理，因此删除项目中的文件（如在 finder 中）后，仍会错误地继续编译
    * 重播剧情时最后一回合会经历一次过渡
        * jquery 在重播时仍会淡入最后一块
        * 应强制视图高度不会因临时内容减少而变小
    * Cmd-D 对应「不保存」选项
    * （待验证）多窗口 - 可能不稳定？例如保存与编译等
    * （已完成？）剧情重载可靠性 - 有时会失败
    * （已完成？）inklecate 副本有时会残留未关闭

* 将 InkFile.path 改为始终使用相对路径，移除 InkFile.relativePath()，用 InkFile.absolutePath() 作为特例，因为保存前我们就知道相对路径，可简化代码路径并提高健壮性

* 将临时风格的事件改为规范的 NodeJS EventEmitters（？）
